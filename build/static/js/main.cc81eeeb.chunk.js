(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{18:function(e,t,n){"use strict";var a,r,s,o=n(66),c="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function i(){s=!1}function u(e){if(e){if(e!==a){if(e.length!==c.length)throw new Error("Custom alphabet for shortid must be "+c.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,n){return t!==n.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+c.length+" unique characters. These characters were not unique: "+t.join(", "));a=e,i()}}else a!==c&&(a=c,i())}function l(){return s||(s=function(){a||u(c);for(var e,t=a.split(""),n=[],r=o.nextValue();t.length>0;)r=o.nextValue(),e=Math.floor(r*t.length),n.push(t.splice(e,1)[0]);return n.join("")}())}e.exports={get:function(){return a||c},characters:function(e){return u(e),a},seed:function(e){o.seed(e),r!==e&&(i(),r=e)},lookup:function(e){return l()[e]},shuffled:l}},33:function(e,t,n){e.exports=n.p+"static/media/cavatar.1de9dd27.png"},35:function(e,t,n){"use strict";e.exports=n(65)},40:function(e,t,n){e.exports=n(79)},45:function(e,t,n){},46:function(e,t,n){},65:function(e,t,n){"use strict";var a=n(18),r=n(67),s=n(71),o=n(72)||0;function c(){return r(o)}e.exports=c,e.exports.generate=c,e.exports.seed=function(t){return a.seed(t),e.exports},e.exports.worker=function(t){return o=t,e.exports},e.exports.characters=function(e){return void 0!==e&&a.characters(e),a.shuffled()},e.exports.isValid=s},66:function(e,t,n){"use strict";var a=1;e.exports={nextValue:function(){return(a=(9301*a+49297)%233280)/233280},seed:function(e){a=e}}},67:function(e,t,n){"use strict";var a,r,s=n(68),o=(n(18),1567752802062),c=7;e.exports=function(e){var t="",n=Math.floor(.001*(Date.now()-o));return n===r?a++:(a=0,r=n),t+=s(c),t+=s(e),a>0&&(t+=s(a)),t+=s(n)}},68:function(e,t,n){"use strict";var a=n(18),r=n(69),s=n(70);e.exports=function(e){for(var t,n=0,o="";!t;)o+=s(r,a.get(),1),t=e<Math.pow(16,n+1),n++;return o}},69:function(e,t,n){"use strict";var a,r="object"===typeof window&&(window.crypto||window.msCrypto);a=r&&r.getRandomValues?function(e){return r.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],n=0;n<e;n++)t.push(Math.floor(256*Math.random()));return t},e.exports=a},71:function(e,t,n){"use strict";var a=n(18);e.exports=function(e){return!(!e||"string"!==typeof e||e.length<6)&&!new RegExp("[^"+a.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e)}},72:function(e,t,n){"use strict";e.exports=0},79:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(21),o=n.n(s),c=n(16),i=n(13),u=(n(45),n(5)),l=n(6),m=n(8),p=n(7),h=n(9),f=(n(46),{isAuthorized:function(){return!!window.localStorage.getItem("appKey")},validateResponse:function(e){var t=e.headers["content-type"],n=e.data.content;return!(!t||-1===t.indexOf("application/json")||200!==e.data.responseCode||n===[])}}),d=function(e){return null},v=n(14),g=n(1),b=n.n(g),w=n(19),E=n.n(w);function y(){var e=localStorage.getItem("appKey");return e||!1}var j={login:function(e){var t;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=[],n.next=3,b.a.awrap(E()({method:"post",url:"https://api.jotform.com//user/login",data:e,config:{headers:{"Content-Type":"multipart/form-data"}}}).then((function(e){!1!==f.validateResponse(e)&&(t.push(e),localStorage.setItem("appKey",e.data.content.appKey),console.log("asdjhbasdkjhasbdjkhasbduhsad"))})).catch((function(e){})));case 3:return n.abrupt("return",t[0]);case 4:case"end":return n.stop()}}))},getForms:function(){var e;return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!y()){t.next=5;break}return e=[],t.next=4,b.a.awrap(E.a.get("https://api.jotform.com/user/forms?apikey=".concat(y(),"&orderby=id")).then((function(t){console.log(t),e.push(t)})).catch((function(t){console.log(t),e.push(t)})));case 4:return t.abrupt("return",e);case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}))},getFormSubmissions:function(e){var t;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!y()){n.next=5;break}return t=[],n.next=4,b.a.awrap(E.a.get("https://api.jotform.com/form/".concat(e,"/submissions?apikey=").concat(y())).then((function(e){console.log("SUBMISSION RESPONSE",e),t.push(e)})).catch((function(e){console.log(e),t.push(e)})));case 4:return n.abrupt("return",t[0]);case 5:return n.abrupt("return",!1);case 6:case"end":return n.stop()}}))}};n(33);var x=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"contactInfo"},r.a.createElement("img",{src:n(33),alt:"",height:"50",width:"50"}),r.a.createElement("span",{className:"contactName"},e.contact)))},O=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={contacts:[],ID:[]},void 0!==e.forms.location.state&&(n.state.ID=e.forms.location.state.formID),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getNamesFromSubmissions()}},{key:"getContacts",value:function(){var e;return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.awrap(j.getFormSubmissions(this.state.ID));case 2:if(!1===(e=t.sent)){t.next=5;break}return t.abrupt("return",e.data.content);case 5:case"end":return t.stop()}}),null,this)}},{key:"getNamesFromSubmissions",value:function(){var e,t,n=this;return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=[],a.next=3,b.a.awrap(this.getContacts());case 3:void 0!==(t=a.sent)&&(t.forEach((function(t){var n=t.answers;Object.values(n).forEach((function(t){String(t.answer).match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi)&&void 0!==t.answer&&e.push(t.answer)}))})),(e=Object(v.a)(new Set(e))).forEach((function(e){n.setState({contacts:[].concat(Object(v.a)(n.state.contacts),[e])})})));case 5:case"end":return a.stop()}}),null,this)}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.contacts.map((function(e){return r.a.createElement(x,{contact:e})})))}}]),t}(r.a.Component),k=n(12),N=n(35),C=n.n(N),D=function(e){return r.a.createElement("div",{className:"middleRightDiv"},e.messages.map((function(e){return r.a.createElement("div",{className:"userMessage",key:C.a.generate()},r.a.createElement("p",null,e.message),r.a.createElement("span",null,e.time))})))};D.defaultProps={messages:{message:"New Message",time:"00:00"}};var M=D,S=n(36),I=n.n(S),A=function(e){function t(e){var n,a=e.props;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,a))).keyPress=n.keyPress.bind(Object(k.a)(n)),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"keyPress",value:function(e){if("Enter"===e.key){var t=I()().format("HH:mm");this.props.enterHandler(e.target.value,t),e.target.value=""}}},{key:"render",value:function(){return r.a.createElement("div",{className:"newMessageDiv"},r.a.createElement("span",{className:"newMessage"},r.a.createElement("input",{type:"text",onKeyPress:this.keyPress})))}}]),t}(r.a.Component),F=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).storeMessages=n.storeMessages.bind(Object(k.a)(n)),n.state={messages:[]},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"storeMessages",value:function(e,t){this.setState({messages:[].concat(Object(v.a)(this.state.messages),[{message:e,time:t}])})}},{key:"render",value:function(){return r.a.createElement("div",{className:"messageList"},r.a.createElement("div",{className:"contactMessage"},r.a.createElement("p",null,"Dummy message from ..."),r.a.createElement("span",null,"10:30")),r.a.createElement(M,{messages:this.state.messages}),r.a.createElement(A,{enterHandler:this.storeMessages}))}}]),t}(r.a.Component),P=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={forms:[],title:"Please select a form"},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){f.isAuthorized(),this.setForms()}},{key:"setForms",value:function(){var e;return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.awrap(j.getForms());case 2:!1!==(e=t.sent)&&this.setState({forms:Object(v.a)(e[0].data.content)});case 4:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){return r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{className:"dropdown"},r.a.createElement("div",{className:"formInfo"},r.a.createElement("button",{type:"button"},r.a.createElement("h1",null,this.state.title))),r.a.createElement("div",{className:"dropdown-content"},this.state.forms.map((function(e){return r.a.createElement("div",null,r.a.createElement(c.b,{to:{pathname:"/home",state:{formID:e.id,formTitle:e.title}}},e.title))})))))}}]),t}(r.a.Component),R=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){window.location.reload()}},{key:"render",value:function(){return f.isAuthorized()?r.a.createElement("div",{className:"container"},r.a.createElement("header",{className:"App-header"},r.a.createElement(P,{forms:this.props})),r.a.createElement("div",{className:"topDiv"},r.a.createElement(d,null),r.a.createElement("div",{className:"topRight"})),r.a.createElement("div",{className:"middleDiv"},r.a.createElement("div",{className:"middleLeftDiv"},r.a.createElement(O,{forms:this.props})),r.a.createElement(F,null))):r.a.createElement(i.a,{to:"/"})}}]),t}(r.a.Component),z=n(39),V=function(e){function t(e){var n,a=e.props;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,a))).login=n.login.bind(Object(k.a)(n)),n.handleChange=n.handleChange.bind(Object(k.a)(n)),n.state={username:"",password:""},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))}},{key:"handleChange",value:function(e){var t=e.target;this.setState(Object(z.a)({},t.name,t.value))}},{key:"login",value:function(){var e,t;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return(e=new FormData).append("username",this.state.username),e.append("password",this.state.password),e.append("appName","ChatApp"),n.next=6,b.a.awrap(j.login(e));case 6:t=n.sent,console.log("Login response: ",t),console.log(t),window.location.href="/home";case 10:case"end":return n.stop()}}),null,this)}},{key:"render",value:function(){return r.a.createElement("div",{className:"loginDiv"},r.a.createElement("input",{type:"text",name:"username",placeholder:"Enter username here...",value:this.state.username,onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Enter password here...",value:this.state.password,onChange:this.handleChange}),r.a.createElement("button",{type:"button",onClick:this.login},"LOGIN"))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=function(){return r.a.createElement("h1",null,"Page Not found")},B=r.a.createElement(c.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:V}),r.a.createElement(i.b,{exact:!0,path:"/home",component:R}),r.a.createElement(i.b,{component:K})));o.a.render(B,document.getElementById("root")),o.a.render(B,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[40,1,2]]]);
//# sourceMappingURL=main.cc81eeeb.chunk.js.map